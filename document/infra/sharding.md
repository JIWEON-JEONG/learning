# Sharding

> 데이터베이스를 여러 대의 서버에 분산하여 저장하는 기술.

## 배경 
- 데이터베이스의 쓰기 관점에서, 단일 서버의 한계에 대한 문제가 있었다.
- Replication 을 통해 쓰기, 읽기 에 대한 책임 분리로 어느정도 부하를 분산시킬수 있지만 정말 쓰기 자체의 작업이 많아 문제가 발생할 경우,
  Scale-UP 을 고려해야하는데 이는 한계가 존재한다. (비용적, 성능적)

- 단일 서버에 저장할 수 있는 데이터 양의 물리적 한계와, 데이터가 많아질수록 쿼리 성능이 저하되는 문제를 해결하기 위해 나오게 되었다.
- 데이터베이스의 수평적확장을 통해 이를 해결하는 것이 샤딩이다.

## 구성요소 

### 샤드 
- 클러스터를 구성하는 각 데이터베이스 인스턴스를 샤드라고 한다.
- 분산된 데이터의 한 조각(chunk)을 담당.
- 하나의 샤드는 전체 데이터 중 일부 데이터를 담고 있고, 고 가용성을 위해 일반적으로 Replica Set 으로 구성되어있다.

### 샤드 키
- 데이터를 분산하는 기준이 되는 키 

### 라우터
- 클라이언트에게는 마치 단일 데이터베이스처럼 보이게 하는 역할.
- 분산 데이터베이스 시스템에서 클라이언트의 요청을 받아 올바른 데이터가 저장된 서버로 전달.

### Config 서버 
- 라우터가 쿼리를 처리하기 위해 가장 먼저 참조하는 곳이며, 샤드 간 데이터 균형(balancing)을 위해 청크가 이동할 때 이 정보를 최신 상태로 업데이트.
- 어떤 샤드에 어떤 데이터가 있는지에 대한 정보를 관리.